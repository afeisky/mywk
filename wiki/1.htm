







<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>android APK应用安装过程以及默认安装路径.htm</title>
<link type="text/css" rel="stylesheet" href="js/ckeditor/contents.css" />
<script type="text/javascript" src="js/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="js/ckfinder/ckfinder.js"></script>
<style type="text/css">
body {
	margin: 0px;
	padding: 0px;
	height: 100%;
	width: 100%;
	font-size: 12px;
}
</style>
<script type="text/javascript">
function edit_save(){
	alert("1111111111");
	if ( typeof CKEDITOR == 'undefined' )
	{
		alert("222222222");
	}
	else
	{
	    alert("3333333");
		var editor = CKEDITOR.replace( 'editor1' );
		 editor.updateElement(); //It is very import one word!!!
		 alert(editor.getData());
	}
}
</script>
</head>
<body>

	<p>

		<form name="form1" action="" onsubmit="return edit_save(this);"
		method="post"><textarea id="editor1" name="editor1" rows="10" cols="80"
			class="ckeditor"></textarea>
		<input type="hidden" id="url" value="http://localhost/wiki/wiki.jsp"> <input
			type="hidden" id="d" value="bootflow"><input
			type="hidden" id="f" value="android APK应用安装过程以及默认安装路径.htm"></form>
	<script type="text/javascript">
        //var text="<p>Just click the <b>Image</b> or <b>Link</b> button, and then <b>&quot;Browse Server&quot;</b>.</p>";
var text= '<h1> 	<span class="link_title"><a href="http://blog.csdn.net/vurtne_ye/article/details/41722583"> android APK应用安装过程以及默认安装路径 </a></span></h1> <div class="article_manage clearfix"> 	<div class="article_r"> 		<span class="link_postdate">2014-12-04 13:04</span> <span class="link_view" title="阅读次数">20413人阅读</span> <span class="link_comments" title="评论次数"> <a href="http://blog.csdn.net/vurtne_ye/article/details/41722583#comments">评论</a>(0)</span> <span class="link_collect tracking-ad" data-mod="popu_171"> <a title="收藏">收藏</a></span> <span class="link_report"> <a href="http://blog.csdn.net/vurtne_ye/article/details/41722583#report" title="举报">举报</a></span></div> </div> <div class="category clearfix"> 	<div class="category_l"> 		<img src="http://static.blog.csdn.net/images/category_icon.jpg" /> <span>分类：</span></div> 	<div class="category_r"> 		<label><span>Android<em>（39）</em></span> <img class="arrow-down" src="http://static.blog.csdn.net/images/arrow_triangle%20_down.jpg" style="display:inline;" /> </label></div> </div> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	一:安装过程</p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	APK是类似Symbian Sis或Sisx的文件格式。通过将APK文件直接传到Android模拟器或Android手机中执行即可安装。</p> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">Android应用安装有如下四种方式</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">1. &nbsp; &nbsp; &nbsp; &nbsp;系统应用安装DD开机时完成，没有安装界面</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">2. &nbsp; &nbsp; &nbsp; &nbsp;网络下载应用安装DD通过market应用完成，没有安装界面</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">3. &nbsp; &nbsp; &nbsp; &nbsp;ADB工具安装DD没有安装界面。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">4. &nbsp; &nbsp; &nbsp; &nbsp;第三方应用安装DD通过SD卡里的APK文件安装，有安装界面，由packageinstaller.apk应用处理安装及卸载过程的界面。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">应用安装的流程及路径&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">应用安装涉及到如下几个目录：</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">system/app&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;系统自带的应用程序，无法删除</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">data/app</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;用户程序安装的目录，有删除权限。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">安装时把apk文件复制到此目录</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">data/data</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;存放应用程序的数据</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">Data/dalvik-cache</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;将apk中的dex文件安装到dalvik-cache目录下(dex文件是dalvik虚拟机的可执行文件,其大小约为原始apk文件大小的四分之一)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp;安装过程：复制APK安装包到data/app目录下，解压并扫描安装包，把dex文件(Dalvik字节码)保存到dalvik-cache目录，并data/data目录下创建对应的应用数据目录。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp;卸载过程：删除安装过程中在上述三个目录下创建的文件及目录。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">一、系统应用安装：&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">PackageManagerService处理各种应用的安装，卸载，管理等工作，开机时由systemServer启动此服务</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">(源文件路径：android\frameworks\base\services\java\com\android\server\PackageManagerService.java)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">PackageManagerService服务启动的流程：</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">1. 首先扫描安装&ldquo;system\framework&rdquo;目录下的jar包</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">1. scanDirLI(mFrameworkDir,PackageParser.PARSE_IS_SYSTEM,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; scanMode | SCAN_NO_DEX);</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">2.第二步扫描安装&ldquo;system\app&rdquo;目录下的各个系统应用</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">scanDirLI(mSystemAppDir,PackageParser.PARSE_IS_SYSTEM, scanMode);</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">3.第三步扫描&ldquo;data\app&rdquo;目录，即用户安装的第三方应用</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">scanDirLI(mAppInstallDir, 0, scanMode);</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">4.第四步扫描&quot; data\app-private&quot;目录，即安装DRM保护的APK文件（目前没有遇到过此类的应用）。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">scanDirLI(mDrmAppPrivateInstallDir,0, scanMode | SCAN_FORWARD_LOCKED);</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">安装应用的过程</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">1.scanDirLI(Filedir, int flags, int scanMode) 遍历安装指定目录下的文件</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">2.scanPackageLI(FilescanFile,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; File destCodeFile, FiledestResourceFile, int parseFlags,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int scanMode) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;安装package文件</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">3.scanPackageLI(</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; File scanFile, File destCodeFile, FiledestResourceFile,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; PackageParser.Package pkg, intparseFlags, int scanMode)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">通过解析安装包parsePackage获取到安装包的信息结构</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">4.mInstaller.install(pkgName,pkg.applicationInfo.uid,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pkg.applicationInfo.uid); &nbsp; 实现文件复制的安装过程</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">（源文件路径：frameworks\base\cmds\installd\installd.install）</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">二、从market上下载应用：&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">Google Market应用需要使用gmail账户登录才可以使用，选择某一应用后，开始下载安装包，此过程中，在手机的信号区有进度条提示，下载完成后，会自动调用Packagemanager的接口安装，调用接口如下：</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">public voidinstallPackage(final Uri packageURI, final IPackageInstallObserver observer,final int flags)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">final Uri packageURI：文件下载完成后保存的路径</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">final IPackageInstallObserver observer：处理返回的安装结果</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">final int flags：安装的参数，从market上下载的应用，安装参数为-r (replace)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">installPackage接口函数的安装过程：</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">1.public voidinstallPackage(</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; final Uri packageURI, final IPackageInstallObserverobserver, final int flags,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; final String installerPackageName)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">final StringinstallerPackageName:安装完成后此名称保存在settings里，一般为null,不是关键参数</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">2.FiletmpPackageFile = copyTempInstallFile(packageURI, res);</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">把apk文件复制到临时目录下的临时文件</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">3.private voidinstallPackageLI(Uri pPackageURI,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int pFlags, boolean newInstall,String installerPackageName,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;File tmpPackageFile, PackageInstalledInfo res)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">解析临时文件，获取应用包名pkgName = PackageParser.parsePackageName(</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tmpPackageFile.getAbsolutePath(), 0);</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">4.判断如果带有参数INSTALL_REPLACE_EXISTING，则调用replacePackageLI(pkgName,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmpPackageFile,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; destFilePath,destPackageFile, destResourceFile,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pkg, forwardLocked,newInstall, installerPackageName,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; res)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">5.如果没有，则调用installNewPackageLI(pkgName,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmpPackageFile,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; destFilePath,destPackageFile, destResourceFile,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pkg,forwardLocked, newInstall, installerPackageName,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; res);</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">6.privatePackageParser.Package scanPackageLI(</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; File scanFile, File destCodeFile, FiledestResourceFile,</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp; &nbsp; &nbsp; &nbsp; PackageParser.Package pkg, intparseFlags, int scanMode)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">scanPackageLI以后的流程，与开机时的应用安装流程相同。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">三、从ADB工具安装&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">Android Debug Bridge (adb) 是SDK自带的管理设备的工具，通过ADB命令行的方式也可以为手机或模拟器安装应用，其入口函数源文件为pm.java</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">(源文件路径：android\frameworks\base\cmds\pm\src\com\android\commands\pm\pm.java)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">ADB命令行的形式为adb install &lt;path_to_apk&gt; ,还可以带安装参数如：&quot;-l&quot;&quot;-r&quot; &quot;-i&quot; &quot;-t&quot;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">函数runInstall()中判断参数</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&quot;-l&quot;DDINSTALL_FORWARD_LOCK</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&nbsp;&quot;-r&quot;&mdash;&mdash;INSTALL_REPLACE_EXISTING&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&quot;-i&quot; &mdash;&mdash;installerPackageName</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">&quot;-t&quot;&mdash;&mdash;INSTALL_ALLOW_TEST</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">我们常用的参数为-r，表示覆盖安装手机上已安装的同名应用。从market上下载的应用，也是直接传入这个参数安装的。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">runInstall与market调用同样的接口完成应用安装。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">public voidinstallPackage(android.net.Uri packageURI,android.content.pm.IPackageInstallObserver observer, int flags,java.lang.String installerPackageName)</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">四、第三方应用安装DD通过SD卡里的APK文件安装&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">把APK安装包保存在SD卡中，从手机里访问SD卡中的APK安装包，点击就可以启动安装界面，系统应用Packageinstaller.apk处理这种方式下的安装及卸载界面流程，如下图：</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">PackageInstallerActivity负责解析包，判断是否是可用的Apk文件</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">创建临时安装文件/data/data/com.android.packageinstaller/files/ApiDemos.apk</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">并启动安装确认界面startInstallConfirm，列出解析得到的该应用基本信息。如果手机上已安装有同名应用，则需要用户确认是否要替换安装。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">确认安装后，启动InstallAppProgress，调用安装接口完成安装。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">pm.installPackage(mPackageURI,observer, installFlags);</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">其它：&nbsp;</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px">1. PackageManagerService.java的内部类AppDirObserver实现了监听app目录的功能：当把某个APK拖到app目录下时，可以直接调用scanPackageLI完成安装。</span></p> <br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> <br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> <br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	2.手机数据区目录&ldquo;data/system/packages.xml&rdquo;文件中，包含了手机上所有已安装应用的基本信息，如安装路径，申请的permission等信息。</p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	&nbsp;</p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	二:更改默认安装路径</p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	&nbsp; &nbsp; 如果你是一个apk应用开发者,没用android系统全套代码,你只想更改你的APK的默认安装路径的话,可以按下面方法来更改:</p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	&nbsp;</p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	<span style="margin:0px; padding:0px; line-height:1.5">在Android<span style="margin:0px; padding:0px">Manifest.xml文件Manifest标签中添加<span class="attribute" style="margin:0px; padding:0px">android:installLocation属性</span><br style="margin:0px; padding:0px" /> 	<span style="margin:0px; padding:0px"> </span></span></span></p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	<span style="margin:0px; padding:0px; line-height:1.5">android:installLocation</span></p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	<span style="margin:0px; padding:0px; line-height:1.5"><span style="margin:0px; padding:0px"><span class="attribute" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">这个属性设置的是默认安装位置， 共有三个有效值，</span><span style="margin:0px; padding:0px">auto、internalOnly、preferExternal</span></span></span></span></p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	<span style="margin:0px; padding:0px; line-height:1.5">对应表</span></p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	<span style="margin:0px; padding:0px">auto 表示自动，由系统决定安装位置,如果系统手机内存足够,默认安装在手机内存里,如果手机内在不够,则会安装在T卡内<br style="margin:0px; padding:0px" /> 	</span></p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	<span style="margin:0px; padding:0px">internalOnly 安装在手机内存</span></p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	<span style="margin:0px; padding:0px">preferExternal 安装在外部存储中</span></p> <table border="0" style="font-size:14px; margin:0px 0px 0px 30px; padding:0px; border-collapse:collapse; border-spacing:0px; border:1px solid rgb(192,192,192); color:rgb(0,0,0); font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px; height:117px; width:719px"> 	<tbody style="margin:0px 0px 0px 30px; padding:0px"> 		<tr style="margin:0px 0px 0px 30px; padding:0px"> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				Constant</td> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				Value</td> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				Description</td> 		</tr> 		<tr style="margin:0px 0px 0px 30px; padding:0px"> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				auto</td> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				0</td> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				Let the system decide install location</td> 		</tr> 		<tr style="margin:0px 0px 0px 30px; padding:0px"> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				internalOnly</td> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				1</td> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				Explicitly request to be installed on internal phone storage only</td> 		</tr> 		<tr style="margin:0px 0px 0px 30px; padding:0px"> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				preferExternal</td> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				2</td> 			<td style="margin:0px; padding:3px; border:1px solid rgb(192,192,192); border-collapse:collapse; word-break:normal!important"> 				Perfer to be installed on SD card, There is no guarantee that the system will honor this request. The application might end up being installed on internal storage if external media is unavailable or too full</td> 		</tr> 	</tbody> </table> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto 10px 30px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	<span style="margin:0px; padding:0px">&nbsp;</span></p> <div class="cnblogs_code" style="color:rgb(51,51,51); font-size:14px; line-height:26px; margin:5px 0px; padding:5px; font-family:"Courier New"; border:1px solid rgb(204,204,204); overflow:auto; background-color:rgb(245,245,245)"> 	<pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:0px; padding:0px; font-family:"Courier New""> &lt;manifest xmlns:android=<span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">http://schemas.android.com/apk/res/android</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5">       package</span>=<span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">com.ray</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5">       android:installLocation</span>=<span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">auto</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5">       android:versionCode</span>=<span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">1</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5">       android:versionName</span>=<span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">1.0</span><span style="margin:0px; padding:0px; line-height:1.5; color:rgb(128,0,0)">&quot;</span>&gt;</pre> </div> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	如果你是一个手机方案开发者,能改framework层的代码,你希望下载到手机里的APK都默认优先安装到T卡的话,可以按下面方法更改:</p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	在PackageParser.java文件里,将private static final int PARSE_DEFAULT_INSTALL_LOCATION &nbsp;这个PARSE_DEFAULT_INSTALL_LOCATION值,改为 PackageInfo.INSTALL_LOCATION_PREFER_EXTERNAL,就可以了.默认下载就会下到T卡里,T卡不存在或者满了 时,才会下到手机内部. 或者如果在应用的AndroidManifest.xml里,指定了installLocation属性为手机内部存储的话,是会存在手机内部的.没指这 定的话,PARSE_DEFAULT_INSTALL_LOCATION这个值指定什么,就下到哪里</p> <p style="color:rgb(51,51,51); font-size:14px; margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:20px"> 	安装在T卡里的应用,有几个缺点:<br /> 	1:因为android装载T卡是在系统启动完成后,才开始装载的.所以如果应用装在T卡里的话,那么它是收不到开机启动完成的BOOT_COMPLETED这个广播的<br /> 	2:如果T卡损坏或者T卡拨出来了,那么装在T卡里的应用是启动不了的.</p> <br style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px" /> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	&nbsp;</p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	系统应用安装的详细过程,老罗有篇文章写得很透彻,这里引用下:</p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:14px; line-height:26px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	Android系统在启动的过程中，会启动一个应用程序管理服务PackageManagerService，这个服务负责扫描系统中特定的目录，找到里 面的应用程序文件，即以Apk为后缀的文件，然后对这些文件进解析，得到应用程序的相关信息，完成应用程序的安装过程，本文将详细分析这个过程。</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;应用程序管理服务PackageManagerService安装应用程序的过程，其实就是解析析应用程序配置文件 AndroidManifest.xml的过程，并从里面得到得到应用程序的相关信息，例如得到应用程序的组件Activity、Service、 Broadcast Receiver和Content Provider等信息，有了这些信息后，通过ActivityManagerService这个服务，我们就可以在系统中正常地使用这些应用程序了。</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;应用程序管理服务PackageManagerService是系统启动的时候由SystemServer组件启动的，启后它就会执行应用程序安装的过 程，因此，本文将从SystemServer启动PackageManagerService服务的过程开始分析系统中的应用程序安装的过程。</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;应用程序管理服务PackageManagerService从启动到安装应用程序的过程如下图所示：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	<img alt="" src="http://hi.csdn.net/attachment/201109/10/0_1315661784a77A.gif" style="border:none; max-width:100%" /></p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;下面我们具体分析每一个步骤。</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 1. SystemServer.main</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数定义在frameworks/base/services/java/com/android/server/SystemServer.java文件中：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:1655px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:10490px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;SystemServer&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">{&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">native</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">static</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;init1(String[]&nbsp;args);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">static</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init1(args);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;SystemServer组件是由Zygote进程负责启动的，启动的时候就会调用它的main函数，这个函数主要调用了JNI方法init1来做一些系统初始化的工作。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 2. SystemServer.init1</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数是一个JNI方法，实现在&nbsp;frameworks/base/services/jni/com_android_server_SystemServer.cpp文件中：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_cpp" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:526px; top:2190px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:799px; top:11018px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-cpp" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">namespace</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;android&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extern</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;C&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="datatypes" style="margin:0px; padding:0px; border:none; color:rgb(46,139,87); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;system_init();&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">static</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;android_server_SystemServer_init1(JNIEnv*&nbsp;env,&nbsp;jobject&nbsp;clazz)&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">{&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;system_init();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">/*</span>&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">&nbsp;*&nbsp;JNI&nbsp;registration.</span>&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">&nbsp;*/</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">static</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;JNINativeMethod&nbsp;gMethods[]&nbsp;=&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">/*&nbsp;name,&nbsp;signature,&nbsp;funcPtr&nbsp;*/</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;init1&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;([Ljava/lang/String;)V&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;(</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">*)&nbsp;android_server_SystemServer_init1&nbsp;},&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">};&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="datatypes" style="margin:0px; padding:0px; border:none; color:rgb(46,139,87); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;register_android_server_SystemServer(JNIEnv*&nbsp;env)&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">{&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;jniRegisterNativeMethods(env,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;com/android/server/SystemServer&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gMethods,&nbsp;NELEM(gMethods));&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">};&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;namespace&nbsp;android</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数很简单，只是调用了system_init函数来进一步执行操作。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 3.&nbsp;libsystem_server.system_init</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;函数system_init实现在libsystem_server库中，源代码位于frameworks/base/cmds/system_server/library/system_init.cpp文件中：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_cpp" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:526px; top:2802px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:799px; top:11622px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-cpp" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extern</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;C&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;status_t&nbsp;system_init()&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">{&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;LOGI(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;Entered&nbsp;system_init()&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;sp&lt;ProcessState&gt;&nbsp;proc(ProcessState::self());&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;sp&lt;IServiceManager&gt;&nbsp;sm&nbsp;=&nbsp;defaultServiceManager();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;LOGI(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;ServiceManager:&nbsp;%p\n&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;sm.get());&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;sp&lt;GrimReaper&gt;&nbsp;grim&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;GrimReaper();&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;sm-&gt;asBinder()-&gt;linkToDeath(grim,&nbsp;grim.get(),&nbsp;0);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="datatypes" style="margin:0px; padding:0px; border:none; color:rgb(46,139,87); font-weight:bold; background-color:inherit">char</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;propBuf[PROPERTY_VALUE_MAX];&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;property_get(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;system_init.startsurfaceflinger&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;propBuf,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;1&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(strcmp(propBuf,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;1&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">)&nbsp;==&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Start&nbsp;the&nbsp;SurfaceFlinger</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SurfaceFlinger::instantiate();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Start&nbsp;the&nbsp;sensor&nbsp;service</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;SensorService::instantiate();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;On&nbsp;the&nbsp;simulator,&nbsp;audioflinger&nbsp;et&nbsp;al&nbsp;don&#39;t&nbsp;get&nbsp;started&nbsp;the</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;same&nbsp;way&nbsp;as&nbsp;on&nbsp;the&nbsp;device,&nbsp;and&nbsp;we&nbsp;need&nbsp;to&nbsp;start&nbsp;them&nbsp;here</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(!proc-&gt;supportsProcesses())&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Start&nbsp;the&nbsp;AudioFlinger</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AudioFlinger::instantiate();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Start&nbsp;the&nbsp;media&nbsp;playback&nbsp;service</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MediaPlayerService::instantiate();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Start&nbsp;the&nbsp;camera&nbsp;service</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CameraService::instantiate();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Start&nbsp;the&nbsp;audio&nbsp;policy&nbsp;service</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AudioPolicyService::instantiate();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;And&nbsp;now&nbsp;start&nbsp;the&nbsp;Android&nbsp;runtime.&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;do&nbsp;this&nbsp;bit</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;of&nbsp;nastiness&nbsp;because&nbsp;the&nbsp;Android&nbsp;runtime&nbsp;initialization&nbsp;requires</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;some&nbsp;of&nbsp;the&nbsp;core&nbsp;system&nbsp;services&nbsp;to&nbsp;already&nbsp;be&nbsp;started.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;All&nbsp;other&nbsp;servers&nbsp;should&nbsp;just&nbsp;start&nbsp;the&nbsp;Android&nbsp;runtime&nbsp;at</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;the&nbsp;beginning&nbsp;of&nbsp;their&nbsp;processes&#39;s&nbsp;main(),&nbsp;before&nbsp;calling</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;the&nbsp;init&nbsp;function.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;LOGI(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;System&nbsp;server:&nbsp;starting&nbsp;Android&nbsp;runtime.\n&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;AndroidRuntime*&nbsp;runtime&nbsp;=&nbsp;AndroidRuntime::getRuntime();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;LOGI(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;System&nbsp;server:&nbsp;starting&nbsp;Android&nbsp;services.\n&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;runtime-&gt;callStatic(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;com/android/server/SystemServer&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;init2&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;If&nbsp;running&nbsp;in&nbsp;our&nbsp;own&nbsp;process,&nbsp;just&nbsp;go&nbsp;into&nbsp;the&nbsp;thread</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;pool.&nbsp;&nbsp;Otherwise,&nbsp;call&nbsp;the&nbsp;initialization&nbsp;finished</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;func&nbsp;to&nbsp;let&nbsp;this&nbsp;process&nbsp;continue&nbsp;its&nbsp;initilization.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(proc-&gt;supportsProcesses())&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOGI(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;System&nbsp;server:&nbsp;entering&nbsp;thread&nbsp;pool.\n&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProcessState::self()-&gt;startThreadPool();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPCThreadState::self()-&gt;joinThreadPool();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOGI(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;System&nbsp;server:&nbsp;exiting&nbsp;thread&nbsp;pool.\n&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;NO_ERROR;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数首先会初始化SurfaceFlinger、SensorService、AudioFlinger、MediaPlayerService、 CameraService和AudioPolicyService这几个服务，然后就通过系统全局唯一的AndroidRuntime实例变量 runtime的callStatic来调用SystemServer的init2函数了。关于这个AndroidRuntime实例变量runtime 的相关资料，可能参考前面一篇文章</span><a href="http://blog.csdn.net/luoshengyang/article/details/6747696" style="color:rgb(51,102,153); text-decoration:none; font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px" target="_blank">Android应用程序进程启动过程的源代码</a><span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">分析一文。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 4. AndroidRuntime.callStatic</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数定义在frameworks/base/core/jni/AndroidRuntime.cpp文件中：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_cpp" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:526px; top:4156px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:799px; top:12956px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-cpp" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">/*</span>&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">*&nbsp;Call&nbsp;a&nbsp;static&nbsp;Java&nbsp;Programming&nbsp;Language&nbsp;function&nbsp;that&nbsp;takes&nbsp;no&nbsp;arguments&nbsp;and&nbsp;returns&nbsp;void.</span>&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">*/</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">status_t&nbsp;AndroidRuntime::callStatic(<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">const</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="datatypes" style="margin:0px; padding:0px; border:none; color:rgb(46,139,87); font-weight:bold; background-color:inherit">char</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">*&nbsp;className,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">const</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="datatypes" style="margin:0px; padding:0px; border:none; color:rgb(46,139,87); font-weight:bold; background-color:inherit">char</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">*&nbsp;methodName)&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">{&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;JNIEnv*&nbsp;env;&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;jclass&nbsp;clazz;&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;jmethodID&nbsp;methodId;&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;env&nbsp;=&nbsp;getJNIEnv();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(env&nbsp;==&nbsp;NULL)&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;UNKNOWN_ERROR;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;clazz&nbsp;=&nbsp;findClass(env,&nbsp;className);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(clazz&nbsp;==&nbsp;NULL)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOGE(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;ERROR:&nbsp;could&nbsp;not&nbsp;find&nbsp;class&nbsp;&#39;%s&#39;\n&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;className);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;UNKNOWN_ERROR;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;methodId&nbsp;=&nbsp;env-&gt;GetStaticMethodID(clazz,&nbsp;methodName,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;()V&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(methodId&nbsp;==&nbsp;NULL)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOGE(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;ERROR:&nbsp;could&nbsp;not&nbsp;find&nbsp;method&nbsp;%s.%s\n&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;className,&nbsp;methodName);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;UNKNOWN_ERROR;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;env-&gt;CallStaticVoidMethod(clazz,&nbsp;methodId);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;NO_ERROR;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数调用由参数className指定的java类的静态成员函数，这个静态成员函数是由参数methodName指定的。上面传进来的参数 className的值为&quot;com/android/server/SystemServer&quot;，而参数methodName的值为&quot;init2&quot;，因 此，接下来就会调用SystemServer类的init2函数了。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 5.&nbsp;SystemServer.init2</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数定义在frameworks/base/services/java/com/android/server/SystemServer.java文件中：<br /> 	&nbsp;</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:4889px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:13678px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;SystemServer&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">{&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">static</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;init2()&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Slog.i(TAG,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;Entered&nbsp;the&nbsp;Android&nbsp;system&nbsp;server!&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread&nbsp;thr&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ServerThread();&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thr.setName(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;android.server.ServerThread&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thr.start();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数创建了一个ServerThread线程，PackageManagerService服务就是这个线程中启动的了。这里调用了ServerThread实例thr的start函数之后，下面就会执行这个实例的run函数了。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 6.&nbsp;ServerThread.run</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数定义在frameworks/base/services/java/com/android/server/SystemServer.java文件中：</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:5277px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:14062px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ServerThread&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;Thread&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation" style="margin:0px; padding:0px; border:none; color:rgb(100,100,100); background-color:inherit">@Override</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;run()&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPackageManager&nbsp;pm&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Critical&nbsp;services...</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">try</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Slog.i(TAG,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;Package&nbsp;Manager&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pm&nbsp;=&nbsp;PackageManagerService.main(context,&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;factoryTest&nbsp;!=&nbsp;SystemServer.FACTORY_TEST_OFF);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">catch</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(RuntimeException&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Slog.e(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;System&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;Failure&nbsp;starting&nbsp;core&nbsp;service&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;e);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数除了启动PackageManagerService服务之外，还启动了其它很多的服务，例如在前面学习Activity和Service的几篇文章中经常看到的ActivityManagerService服务，有兴趣的读者可以自己研究一下。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 7.&nbsp;PackageManagerService.main</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数定义在frameworks/base/services/java/com/android/server/PackageManagerService.java文件中：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_cpp" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:526px; top:5976px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:799px; top:14751px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-cpp" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageManagerService&nbsp;extends&nbsp;IPackageManager.Stub&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">static</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;final&nbsp;IPackageManager&nbsp;main(Context&nbsp;context,&nbsp;boolean&nbsp;factoryTest)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PackageManagerService&nbsp;m&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageManagerService(context,&nbsp;factoryTest);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServiceManager.addService(<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;package&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;m);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;m;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数创建了一个PackageManagerService服务实例，然后把这个服务添加到ServiceManager中 去，ServiceManager是Android系统Binder进程间通信机制的守护进程，负责管理系统中的Binder对象，具体可以参考</span><a href="http://blog.csdn.net/luoshengyang/article/details/6621566" style="color:rgb(51,102,153); text-decoration:none; font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px" target="_blank">浅谈Service Manager成为Android进程间通信（IPC）机制Binder守护进程之路</a><span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">一文。</span><br style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px" /> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;在创建这个PackageManagerService服务实例时，会在PackageManagerService类的构造函数中开始执行安装应用程序的过程：</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:6362px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:15132px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageManagerService&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;IPackageManager.Stub&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageManagerService(Context&nbsp;context,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">boolean</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;factoryTest)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">synchronized</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(mInstallLock)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">synchronized</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(mPackages)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;dataDir&nbsp;=&nbsp;Environment.getDataDirectory();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mAppDataDir&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;File(dataDir,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;data&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mSecureAppDataDir&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;File(dataDir,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;secure/data&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mDrmAppPrivateInstallDir&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;File(dataDir,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;app-private&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mFrameworkDir&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;File(Environment.getRootDirectory(),&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;framework&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mDalvikCacheDir&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;File(dataDir,&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;dalvik-cache&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Find&nbsp;base&nbsp;frameworks&nbsp;(resource&nbsp;packages&nbsp;without&nbsp;code).</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mFrameworkInstallObserver&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;AppDirObserver(&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mFrameworkDir.getPath(),&nbsp;OBSERVER_EVENTS,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">true</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mFrameworkInstallObserver.startWatching();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanDirLI(mFrameworkDir,&nbsp;PackageParser.PARSE_IS_SYSTEM&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;PackageParser.PARSE_IS_SYSTEM_DIR,&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanMode&nbsp;|&nbsp;SCAN_NO_DEX,&nbsp;<span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Collect&nbsp;all&nbsp;system&nbsp;packages.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mSystemAppDir&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;File(Environment.getRootDirectory(),&nbsp;</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;app&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mSystemInstallObserver&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;AppDirObserver(&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mSystemAppDir.getPath(),&nbsp;OBSERVER_EVENTS,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">true</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mSystemInstallObserver.startWatching();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanDirLI(mSystemAppDir,&nbsp;PackageParser.PARSE_IS_SYSTEM&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;PackageParser.PARSE_IS_SYSTEM_DIR,&nbsp;scanMode,&nbsp;<span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Collect&nbsp;all&nbsp;vendor&nbsp;packages.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mVendorAppDir&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;File(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;/vendor/app&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mVendorInstallObserver&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;AppDirObserver(&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mVendorAppDir.getPath(),&nbsp;OBSERVER_EVENTS,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">true</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mVendorInstallObserver.startWatching();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanDirLI(mVendorAppDir,&nbsp;PackageParser.PARSE_IS_SYSTEM&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;PackageParser.PARSE_IS_SYSTEM_DIR,&nbsp;scanMode,&nbsp;<span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mAppInstallObserver&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;AppDirObserver(&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mAppInstallDir.getPath(),&nbsp;OBSERVER_EVENTS,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">false</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mAppInstallObserver.startWatching();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanDirLI(mAppInstallDir,&nbsp;<span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">,&nbsp;scanMode,&nbsp;</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mDrmAppInstallObserver&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;AppDirObserver(&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mDrmAppPrivateInstallDir.getPath(),&nbsp;OBSERVER_EVENTS,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">false</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mDrmAppInstallObserver.startWatching();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanDirLI(mDrmAppPrivateInstallDir,&nbsp;PackageParser.PARSE_FORWARD_LOCK,&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanMode,&nbsp;<span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这里会调用scanDirLI函数来扫描移动设备上的下面这五个目录中的Apk文件：</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;<strong><em>/system/framework</em></strong></p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	<strong><em>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;/system/app</em></strong></p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	<strong><em>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;/vendor/app</em></strong></p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	<strong><em>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;/data/app</em></strong></p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	<strong><em>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;/data/app-private</em></strong></p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; Step 8.&nbsp;PackageManagerService.scanDirLI<br /> 	&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;这个函数定义在frameworks/base/services/java/com/android/server/PackageManagerService.java文件中：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:7840px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:16588px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageManagerService&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;IPackageManager.Stub&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">private</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;scanDirLI(File&nbsp;dir,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;flags,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;scanMode,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;currentTime)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String[]&nbsp;files&nbsp;=&nbsp;dir.list();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;i;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">for</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(i=</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;i&lt;files.length;&nbsp;i++)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;file&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;File(dir,&nbsp;files[i]);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(!isPackageFilename(files[i]))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Ignore&nbsp;entries&nbsp;which&nbsp;are&nbsp;not&nbsp;apk&#39;s</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">continue</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PackageParser.Package&nbsp;pkg&nbsp;=&nbsp;scanPackageLI(file,&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flags|PackageParser.PARSE_MUST_BE_APK,&nbsp;scanMode,&nbsp;currentTime);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Don&#39;t&nbsp;mess&nbsp;around&nbsp;with&nbsp;apps&nbsp;in&nbsp;system&nbsp;partition.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(pkg&nbsp;==&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&amp;&amp;&nbsp;(flags&nbsp;&amp;&nbsp;PackageParser.PARSE_IS_SYSTEM)&nbsp;==&nbsp;</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&amp;&amp;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mLastScanError&nbsp;==&nbsp;PackageManager.INSTALL_FAILED_INVALID_APK)&nbsp;{&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Delete&nbsp;the&nbsp;apk</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Slog.w(TAG,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;Cleaning&nbsp;up&nbsp;failed&nbsp;install&nbsp;of&nbsp;&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;+&nbsp;file);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file.delete();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 对于目录中的每一个文件，如果是以后Apk作为后缀名，那么就调用scanPackageLI函数来对它进行解析和安装。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; Step 9.&nbsp;PackageManagerService.scanPackageLI</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 这个函数定义在frameworks/base/services/java/com/android/server/PackageManagerService.java文件中：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:8539px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:17277px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageManagerService&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;IPackageManager.Stub&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">private</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageParser.Package&nbsp;scanPackageLI(File&nbsp;scanFile,&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;parseFlags,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;scanMode,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;currentTime)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;scanPath&nbsp;=&nbsp;scanFile.getPath();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parseFlags&nbsp;|=&nbsp;mDefParseFlags;&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PackageParser&nbsp;pp&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageParser(scanPath);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageParser.Package&nbsp;pkg&nbsp;=&nbsp;pp.parsePackage(scanFile,&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanPath,&nbsp;mMetrics,&nbsp;parseFlags);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;scanPackageLI(pkg,&nbsp;parseFlags,&nbsp;scanMode&nbsp;|&nbsp;SCAN_UPDATE_SIGNATURE,&nbsp;currentTime);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数首先会为这个Apk文件创建一个PackageParser实例，接着调用这个实例的parsePackage函数来对这个Apk文件进行解 析。这个函数最后还会调用另外一个版本的scanPackageLI函数把来解析后得到的应用程序信息保存在PackageManagerService 中。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 10.&nbsp;PackageParser.parsePackage<br /> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数定义在frameworks/base/core/java/android/content/pm/PackageParser.java文件中：</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:9146px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:17876px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageParser&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;Package&nbsp;parsePackage(File&nbsp;sourceFile,&nbsp;String&nbsp;destCodePath,&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DisplayMetrics&nbsp;metrics,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;flags)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mArchiveSourcePath&nbsp;=&nbsp;sourceFile.getPath();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XmlResourceParser&nbsp;parser&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AssetManager&nbsp;assmgr&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">boolean</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;assetError&nbsp;=&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">true</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">try</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assmgr&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;AssetManager();&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;cookie&nbsp;=&nbsp;assmgr.addAssetPath(mArchiveSourcePath);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">(cookie&nbsp;!=&nbsp;</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser&nbsp;=&nbsp;assmgr.openXmlResourceParser(cookie,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;AndroidManifest.xml&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assetError&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">false</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">catch</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String[]&nbsp;errorText&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;String[</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">1</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">];&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Package&nbsp;pkg&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exception&nbsp;errorException&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">try</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;XXXX&nbsp;todo:&nbsp;need&nbsp;to&nbsp;figure&nbsp;out&nbsp;correct&nbsp;configuration.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resources&nbsp;res&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;Resources(assmgr,&nbsp;metrics,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pkg&nbsp;=&nbsp;parsePackage(res,&nbsp;parser,&nbsp;flags,&nbsp;errorText);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">catch</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parser.close();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assmgr.close();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Set&nbsp;code&nbsp;and&nbsp;resource&nbsp;paths</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pkg.mPath&nbsp;=&nbsp;destCodePath;&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pkg.mScanPath&nbsp;=&nbsp;mArchiveSourcePath;&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//pkg.applicationInfo.sourceDir&nbsp;=&nbsp;destCodePath;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//pkg.applicationInfo.publicSourceDir&nbsp;=&nbsp;destRes;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pkg.mSignatures&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;pkg;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;每一个Apk文件都是一个归档文件，它里面包含了Android应用程序的配置文件AndroidManifest.xml，这里主要就是要对这个配置 文件就行解析了，从Apk归档文件中得到这个配置文件后，就调用另一外版本的parsePackage函数对这个应用程序进行解析了：</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:10275px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:18989px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageParser&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">private</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;Package&nbsp;parsePackage(&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resources&nbsp;res,&nbsp;XmlResourceParser&nbsp;parser,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;flags,&nbsp;String[]&nbsp;outError)&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">throws</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;XmlPullParserException,&nbsp;IOException&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;pkgName&nbsp;=&nbsp;parsePackageName(parser,&nbsp;attrs,&nbsp;flags,&nbsp;outError);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;Package&nbsp;pkg&nbsp;=&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;Package(pkgName);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;type;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TypedArray&nbsp;sa&nbsp;=&nbsp;res.obtainAttributes(attrs,&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;com.android.internal.R.styleable.AndroidManifest);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">while</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;((type=parser.next())&nbsp;!=&nbsp;parser.END_DOCUMENT&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(type&nbsp;!=&nbsp;parser.END_TAG&nbsp;||&nbsp;parser.getDepth()&nbsp;&gt;&nbsp;outerDepth))&nbsp;{&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(type&nbsp;==&nbsp;parser.END_TAG&nbsp;||&nbsp;type&nbsp;==&nbsp;parser.TEXT)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">continue</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;tagName&nbsp;=&nbsp;parser.getName();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;application&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(!parseApplication(pkg,&nbsp;res,&nbsp;parser,&nbsp;attrs,&nbsp;flags,&nbsp;outError))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;permission-group&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;permission&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;permission-tree&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;uses-permission&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;uses-configuration&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;uses-feature&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;uses-sdk&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;supports-screens&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;protected-broadcast&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;instrumentation&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;original-package&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;adopt-permissions&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;uses-gl-texture&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;compatible-screens&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;eat-comment&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(RIGID_PARSER)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;pkg;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这里就是对AndroidManifest.xml文件中的各个标签进行解析了，各个标签的含义可以参考官方文档</span><a href="http://developer.android.com/guide/topics/manifest/manifest-intro.html" style="color:rgb(51,102,153); text-decoration:none; font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px" target="_blank">http://developer.android.com/guide/topics/manifest/manifest-intro.html</a><span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">，这里我们只简单看一下application标签的解析，这是通过调用parseApplication函数来进行的。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 11.&nbsp;PackageParser.parseApplication<br /> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数定义在frameworks/base/core/java/android/content/pm/PackageParser.java文件中：</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:11901px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:20590px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">public</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageParser&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">private</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">boolean</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;parseApplication(Package&nbsp;owner,&nbsp;Resources&nbsp;res,&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XmlPullParser&nbsp;parser,&nbsp;AttributeSet&nbsp;attrs,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;flags,&nbsp;String[]&nbsp;outError)&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">throws</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;XmlPullParserException,&nbsp;IOException&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ApplicationInfo&nbsp;ai&nbsp;=&nbsp;owner.applicationInfo;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;String&nbsp;pkgName&nbsp;=&nbsp;owner.applicationInfo.packageName;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TypedArray&nbsp;sa&nbsp;=&nbsp;res.obtainAttributes(attrs,&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;com.android.internal.R.styleable.AndroidManifestApplication);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;type;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">while</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;((type=parser.next())&nbsp;!=&nbsp;parser.END_DOCUMENT&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(type&nbsp;!=&nbsp;parser.END_TAG&nbsp;||&nbsp;parser.getDepth()&nbsp;&gt;&nbsp;innerDepth))&nbsp;{&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(type&nbsp;==&nbsp;parser.END_TAG&nbsp;||&nbsp;type&nbsp;==&nbsp;parser.TEXT)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">continue</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;tagName&nbsp;=&nbsp;parser.getName();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;activity&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Activity&nbsp;a&nbsp;=&nbsp;parseActivity(owner,&nbsp;res,&nbsp;parser,&nbsp;attrs,&nbsp;flags,&nbsp;outError,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">false</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;owner.activities.add(a);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;receiver&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Activity&nbsp;a&nbsp;=&nbsp;parseActivity(owner,&nbsp;res,&nbsp;parser,&nbsp;attrs,&nbsp;flags,&nbsp;outError,&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">true</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;owner.receivers.add(a);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;service&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Service&nbsp;s&nbsp;=&nbsp;parseService(owner,&nbsp;res,&nbsp;parser,&nbsp;attrs,&nbsp;flags,&nbsp;outError);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;owner.services.add(s);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;provider&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Provider&nbsp;p&nbsp;=&nbsp;parseProvider(owner,&nbsp;res,&nbsp;parser,&nbsp;attrs,&nbsp;flags,&nbsp;outError);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;owner.providers.add(p);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;activity-alias&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Activity&nbsp;a&nbsp;=&nbsp;parseActivityAlias(owner,&nbsp;res,&nbsp;parser,&nbsp;attrs,&nbsp;flags,&nbsp;outError);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;owner.activities.add(a);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(parser.getName().equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;meta-data&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;uses-library&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(tagName.equals(</span><span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;uses-package&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">))&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">true</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p> 	<span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这里就是对AndroidManifest.xml文件中的application标签进行解析了，我们常用到的标签就有activity、service、receiver和provider，各个标签的含义可以参考官方文档</span><a href="http://developer.android.com/guide/topics/manifest/manifest-intro.html" style="color:rgb(51,102,153); text-decoration:none; font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px" target="_blank">http://developer.android.com/guide/topics/manifest/manifest-intro.html</a><span style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px">。</span></p> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这里解析完成后，一层层返回到Step 9中，调用另一个版本的scanPackageLI函数把来解析后得到的应用程序信息保存下来。</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;Step 12.&nbsp;PackageManagerService.scanPackageLI</p> <p align="left" style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数定义在frameworks/base/services/java/com/android/server/PackageManagerService.java文件中：</p> <div class="dp-highlighter bg_java" style="font-family:Consolas,"Courier New",Courier,mono,serif; width:687.04541015625px; overflow:auto; padding-top:1px; color:rgb(51,51,51); line-height:25.9943180084229px; margin:18px 0px!important; background-color:rgb(231,229,220)"> 	<div class="bar" style="padding-left:45px"> 		<div class="tools" style="padding:3px 8px 10px 10px; font-size:9px; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; color:silver; border-left-width:3px; border-left-style:solid; border-left-color:rgb(108,226,108); background-color:rgb(248,248,248)"> 			<strong>[java]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="view plain">view plain</a><a class="CopyToClipboard" href="http://blog.csdn.net/luoshengyang/article/details/6766010#" style="color:rgb(160,160,160); text-decoration:none; border:none; padding:1px; margin:0px 10px 0px 0px; font-size:9px; display:inline-block; width:16px; height:16px; text-indent:-2000px; background-color:inherit" target="_blank" title="copy">copy</a> 			<div style="position:absolute; left:532px; top:13311px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 			<div style="position:absolute; left:805px; top:21980px; width:18px; height:18px; z-index:99"> 				&nbsp;</div> 		</div> 	</div> 	<ol class="dp-j" start="1" style="padding:0px; border:none; list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)"> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit"><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">class</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageManagerService&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">extends</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;IPackageManager.Stub&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Keys&nbsp;are&nbsp;String&nbsp;(package&nbsp;name),&nbsp;values&nbsp;are&nbsp;Package.&nbsp;&nbsp;This&nbsp;also&nbsp;serves</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;as&nbsp;the&nbsp;lock&nbsp;for&nbsp;the&nbsp;global&nbsp;state.&nbsp;&nbsp;Methods&nbsp;that&nbsp;must&nbsp;be&nbsp;called&nbsp;with</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;this&nbsp;lock&nbsp;held&nbsp;have&nbsp;the&nbsp;prefix&nbsp;&quot;LP&quot;.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;HashMap&lt;String,&nbsp;PackageParser.Package&gt;&nbsp;mPackages&nbsp;=&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;HashMap&lt;String,&nbsp;PackageParser.Package&gt;();&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;All&nbsp;available&nbsp;activities,&nbsp;for&nbsp;your&nbsp;resolving&nbsp;pleasure.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ActivityIntentResolver&nbsp;mActivities&nbsp;=&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ActivityIntentResolver();&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;All&nbsp;available&nbsp;receivers,&nbsp;for&nbsp;your&nbsp;resolving&nbsp;pleasure.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ActivityIntentResolver&nbsp;mReceivers&nbsp;=&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ActivityIntentResolver();&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;All&nbsp;available&nbsp;services,&nbsp;for&nbsp;your&nbsp;resolving&nbsp;pleasure.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ServiceIntentResolver&nbsp;mServices&nbsp;=&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ServiceIntentResolver();&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Keys&nbsp;are&nbsp;String&nbsp;(provider&nbsp;class&nbsp;name),&nbsp;values&nbsp;are&nbsp;Provider.</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">final</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;HashMap&lt;ComponentName,&nbsp;PackageParser.Provider&gt;&nbsp;mProvidersByComponent&nbsp;=&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;HashMap&lt;ComponentName,&nbsp;PackageParser.Provider&gt;();&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">private</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;PackageParser.Package&nbsp;scanPackageLI(PackageParser.Package&nbsp;pkg,&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;parseFlags,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;scanMode,&nbsp;</span><span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">long</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;currentTime)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">synchronized</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(mPackages)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="margin:0px; padding:0px; border:none; color:rgb(0,130,0); background-color:inherit">//&nbsp;Add&nbsp;the&nbsp;new&nbsp;setting&nbsp;to&nbsp;mPackages</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mPackages.put(pkg.applicationInfo.packageName,&nbsp;pkg);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;N&nbsp;=&nbsp;pkg.providers.size();&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;i;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">for</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(i=</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;i&lt;N;&nbsp;i++)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PackageParser.Provider&nbsp;p&nbsp;=&nbsp;pkg.providers.get(i);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.info.processName&nbsp;=&nbsp;fixProcessName(pkg.applicationInfo.processName,&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.info.processName,&nbsp;pkg.applicationInfo.uid);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mProvidersByComponent.put(<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">new</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;ComponentName(p.info.packageName,&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.info.name),&nbsp;p);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N&nbsp;=&nbsp;pkg.services.size();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">for</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(i=</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;i&lt;N;&nbsp;i++)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PackageParser.Service&nbsp;s&nbsp;=&nbsp;pkg.services.get(i);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s.info.processName&nbsp;=&nbsp;fixProcessName(pkg.applicationInfo.processName,&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s.info.processName,&nbsp;pkg.applicationInfo.uid);&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mServices.addService(s);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N&nbsp;=&nbsp;pkg.receivers.size();&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r&nbsp;=&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">null</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;&nbsp;</span></span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">for</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(i=</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;i&lt;N;&nbsp;i++)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PackageParser.Activity&nbsp;a&nbsp;=&nbsp;pkg.receivers.get(i);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.info.processName&nbsp;=&nbsp;fixProcessName(pkg.applicationInfo.processName,&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.info.processName,&nbsp;pkg.applicationInfo.uid);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mReceivers.addActivity(a,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;receiver&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N&nbsp;=&nbsp;pkg.activities.size();&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">for</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;(i=</span><span class="number" style="margin:0px; padding:0px; border:none; color:rgb(192,0,0); background-color:inherit">0</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">;&nbsp;i&lt;N;&nbsp;i++)&nbsp;{&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PackageParser.Activity&nbsp;a&nbsp;=&nbsp;pkg.activities.get(i);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.info.processName&nbsp;=&nbsp;fixProcessName(pkg.applicationInfo.processName,&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.info.processName,&nbsp;pkg.applicationInfo.uid);&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mActivities.addActivity(a,&nbsp;<span class="string" style="margin:0px; padding:0px; border:none; color:blue; background-color:inherit">&quot;activity&quot;</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">);&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="margin:0px; padding:0px; border:none; color:rgb(0,102,153); font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:none; background-color:inherit">&nbsp;pkg;&nbsp;&nbsp;</span></span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;</span></li> 		<li style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;......&nbsp;&nbsp;</span></li> 		<li class="alt" style="border-style:none none none solid; border-left-width:3px; border-left-color:rgb(108,226,108); list-style:decimal-leading-zero outside; color:inherit; line-height:17.27272605896px; margin:0px!important; padding:0px 3px 0px 10px!important"> 			<span style="margin:0px; padding:0px; border:none; color:black; background-color:inherit">}&nbsp;&nbsp;</span></li> 	</ol> </div> <p style="color:rgb(51,51,51); font-family:Arial; font-size:13.63636302948px; line-height:25.9943180084229px"> 	&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;这个函数主要就是把前面解析应用程序得到的package、provider、service、receiver和activity等信息保存在PackageManagerService服务中了。</p> ';

// This is a check for the CKEditor class. If not defined, the paths must be checked.
if ( typeof CKEDITOR == 'undefined' )
{
	document.write(
		'<strong><span style="color: #ff0000">Error</span>: CKEditor not found</strong>.' +
		'This sample assumes that CKEditor (not included with CKFinder) is installed in' +
		'the "/ckeditor/" path. If you have it installed in a different place, just edit' +
		'this file, changing the wrong paths in the &lt;head&gt; (line 5) and the "BasePath"' +
		'value (line 32).' ) ;
}
else
{
	var editor = CKEDITOR.replace( 'editor1' );
	editor.setData(text);
	  //editor.setData( '<p>Just click the <b>Image</b> or <b>Link</b> button, and then <b>&quot;Browse Server&quot;</b>.</p>' );
			// Just call CKFinder.SetupCKEditor and pass the CKEditor instance as the first argument.
			// The second parameter (optional), is the path for the CKFinder installation (default = "/ckfinder/").
	CKFinder.setupCKEditor(editor, 'js/ckfinder/');
			// It is also possible to pass an object with selected CKFinder properties as a second argument.
			// CKFinder.SetupCKEditor( editor, { BasePath : '../../', RememberLastFolder : false } ) ;
}
		// define-self submit event:
	editor.on("instanceReady", function(evt) {
			editor.addCommand("save", {
				modes : {
					wysiwyg : 1,
					source : 1
				},
				exec : function(editor) {
					//alert("0000");
					var form = document.form1;
					form.action = "";//传想要跳转的路径
					var dir = document.getElementById("d").value;
					var filename = document.getElementById("f").value;
					//alert("111111111");
					if (filename.length == 0) {
						filename = prompt("请输入文件名", filename);
					}
					
					if (filename.length == 0) {
						return true;
					}
					var extname = "";
					var len = filename.length;
					//alert("len=" + len);
					if (len < 4) {
						//alert("222");
						extname = ".htm";
					} else {			
						//alert("3333");
						var extName4=filename.substring(len-4,len);
						//alert("3333 "+extName4);
						if (extName4==".txt" || extName4==".htm" || extName4==".log"){	
							//alert("444");
						}else{
							//alert("555");
							if (len>5){				 
								 extName4=filename.substring(len-5,len);  
								 if (extName4==".html" || extName4==".text"){
									 //alert("555");
								 }else{
									 extname=".htm";					 
								 }
							}else{
								extname=".htm";
							}
						}
					}
					filename=filename+extname;	
					var url=document.getElementById("url").value;
					document.getElementById("f").value = filename;	
					form.action =url+"?d="+dir+"&f="+filename+"&e=1";
					//alert(url+"?d="+dir+"&f="+filename+"&e=1");
					form.submit(); 
					return true;
				}
			});
		});

editor.on("instanceReady", function(evt) {
			editor.addCommand("about", {
				modes : {
					wysiwyg : 1,
					source : 1
				},
				exec : function(editor) {
					window.close();
					return true;
				}
			});
		});
(function () {
            editor.on('instanceReady', function (event) {
                var editor = event.editor;
                setTimeout(function () {
                    // Delay bit more if editor is still not ready.
                    if (!editor.element) {
                        setTimeout(arguments.callee, 100);
                        return;
                    }
                    event.removeListener('instanceReady', this.callee);
                    if (editor.name == 'editor1') {
                        var command = editor.getCommand('maximize');
                        command.exec();
                    }
                }, 0);
            }, null, null, 9999);
        })();

	</script>
</body>
</html>